<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rust Link Collection</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container py-4">
<div class="row">

<h1>Rust Link Collection</h1>
<p class="lead">Current Stable Version: <span id="current-version">(loading...)</span></p>

<div class="col-md-4">

<h3>Documentation</h3>
<ul>
    <li><a href="https://doc.rust-lang.org/stable/std/index.html">Standard Library (stable)</a></li>
    <li><a href="https://doc.rust-lang.org/beta/std/index.html">Standard Library (beta)</a></li>
    <li><a href="https://doc.rust-lang.org/nightly/std/index.html">Standard Library (nightly)</a></li>
    <li><a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html">Targets / Platform Support</a></li>
    <li><a href="https://doc.rust-lang.org/cargo/reference/manifest.html">Cargo.toml Format</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Learn Rust</h3>
<ul>
    <li><a href="https://doc.rust-lang.org/book/">Rust Book</a></li>
    <li><a href="https://github.com/rust-lang/rustlings/">Rustlings</a></li>
    <li><a href="https://doc.rust-lang.org/stable/rust-by-example/">Rust By Example</a></li>
    <li><a href="https://rust-lang-nursery.github.io/rust-cookbook/">Rust Cookbook</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Master Rust</h3>
<ul>
    <li><a href="https://doc.rust-lang.org/reference/index.html">The Rust Reference</a></li>
    <li><a href="https://doc.rust-lang.org/nomicon/index.html">The Rustonomicon - Unsafe Rust</a></li>
    <li><a href="https://doc.rust-lang.org/unstable-book/index.html">Unstable Book</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Additional Documentation</h3>
<ul>
    <li><a href="https://doc.rust-lang.org/edition-guide/index.html">Edition Guide</a></li>
    <li><a href="https://doc.rust-lang.org/cargo/index.html">Cargo Book</a></li>
    <li><a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc Book</a></li>
    <li><a href="https://doc.rust-lang.org/rustc/index.html">rustc Book</a></li>
    <li><a href="https://doc.rust-lang.org/error-index.html">Compiler Error Index</a></li>
    <li><a href="https://doc.rust-lang.org/stable/clippy/index.html">Clippy Book</a></li>
    <li><a href="https://rust-lang.github.io/rust-clippy/master/index.html">Clippy Lint Search</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Application Domains</h3>
<ul>
    <li><a href="https://rust-cli.github.io/book/index.html">Command-Line Book</a></li>
    <li><a href="https://rustwasm.github.io/docs/book/index.html">WebAssembly Book</a></li>
    <li><a href="https://rustwasm.github.io/docs/wasm-bindgen/">wasm-bindgen Book</a></li>
    <li><a href="https://rustwasm.github.io/docs/wasm-pack/introduction.html">wasm-pack Book</a></li>
    <li><a href="https://doc.rust-lang.org/stable/embedded-book/index.html">Embedded Rust Book</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Official Websites</h3>
<ul>
    <li><a href="https://rust-lang.org/">Official Website</a></li>
    <li><a href="https://crates.io/">crates.io</a></li>
    <li><a href="https://blog.rust-lang.org/">Main Rust Blog</a></li>
    <li><a href="https://blog.rust-lang.org/inside-rust/index.html">"Inside Rust" Blog</a></li>
    <li><a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md">Changelog</a></li>
    <li><a href="https://play.rust-lang.org/">Rust Playground</a></li>
    <li><a href="https://rustup.rs/">Rustup</a></li>
</ul>

</div>
<div class="col-md-4">

<h3>Community</h3>
<ul>
    <li><a href="https://rust-lang.zulipchat.com">Zulip</a></li>
    <li><a href="https://discord.gg/rust-lang">Discord</a></li>
    <li><a href="https://reddit.com/rust">Reddit</a></li>
    <li><a href="https://internals.rust-lang.org">Internals Forum (IRLO)</a></li>
    <li><a href="https://users.rust-lang.org">Users Forum</a></li>
    <li><a href="https://github.com/rust-lang/rust">GitHub</a></li>
    <li><a href="https://github.com/rust-lang/rust/issues">GitHub Issues</a></li>
    <li><a href="https://github.com/rust-lang/rust/pulls">GitHub PRs</a></li>
    <li><a href="https://crater.rust-lang.org">Crater Queue</a></li>
    <li><a href="https://github.com/rust-lang/blog.rust-lang.org">GitHub repository for blog.rust-lang.org</a></li>
</ul>

</div>
<div class="col-md-8">

<h3>Release Schedule (approximate)</h3>
<ul id="release-schedule">
</ul>

</div>
</div>
</div>

<script>
function formatVersionEntry(version, date) {
    let dateStr = `${date.getUTCFullYear()}-${(date.getUTCMonth()+1).toString().padStart(2, '0')}-${date.getUTCDate().toString().padStart(2, '0')}`;
    let dateDiff = Math.round((date - new Date()) / 86_400_000);
    let dateDiffStr = '';
    if (dateDiff < 0) {
        dateDiffStr = `${-dateDiff} days ago`;
    } else if (dateDiff == -1) {
        dateDiffStr = 'yesterday';
    } else if (dateDiff == 0) {
        dateDiffStr = 'today';
    } else if (dateDiff == 1) {
        dateDiffStr = 'tomorrow';
    } else {
        dateDiffStr = `in ${dateDiff} days`;
    }
    return `<li>1.${version} - ${dateStr} - ${dateDiffStr}</li>`;
}

// https://stackoverflow.com/a/19691491
function addDays(date, days) {
    var result = new Date(date);
    result.setDate(result.getDate() + days);
    return result;
}

async function showCurrentReleaseInfo() {
    let resp = await fetch('https://api.github.com/repos/rust-lang/rust/releases');
    let releases = await resp.json();
    // console.log(releases[0]);
    let date = new Intl.DateTimeFormat(undefined, { dateStyle: 'full', timeStyle: 'short' }).format(new Date(releases[0].created_at));
    document.getElementById('current-version').innerHTML =
        `<a href="${releases[0].html_url}">${releases[0].name}</a> (released ${date})`;
}

function showReleaseSchedule() {
    let result = '';
    let date = new Date(Date.UTC(2015, 4, 14));
    let oldest = addDays(new Date(), -180);
    let newest = addDays(new Date(), 180);
    let version = 0;
    while (true) {
        if (date > oldest) {
            result += formatVersionEntry(version, date);
        }
        ++version;
        date = addDays(date, 42);
        if (date > newest) {
            break;
        }
    }
    document.getElementById('release-schedule').innerHTML = result;
}

window.onload = async () => {
    showReleaseSchedule();
    await showCurrentReleaseInfo();
};
</script>

</body>
</html>
